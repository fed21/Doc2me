<body id="body-home" style="overflow-x: hidden;">
    <% if user_signed_in?  %>
    <nav>
        <ul class="ul-nav-logo">
            <li>
                <div class="logo-image">
                    <%= link_to "/" do %>
                    <%=image_tag("Icon Doctor.png", alt: "Example Image" , class:"img-fluid")%>
                    <% end %>
                 </div>
            </li>
            <li>
                <div  class="mylogo">
                    <%= link_to "/" do %>
                    <p> DOC2ME </p>
                    <% end %>
                </div>
            </li>
        </ul>
        <ul class="ul-nav logged-nav">
            <li>
                <a  href="/">Home</a>
            </li>
            <li>
                <a href="/servizi">Servizi</a>
            </li>
            <li>
                <a href="/team">Il team</a>
            </li>
            <li>
                <a href="/contatti">Contatti</a>
            </li>
            <li>
                <a  href="/FAQ">FAQ</a>
            </li> 
            <li>
                <a  href="/profilo">Profilo</a>
            </li> 
            <li>
                <a  href="/prenotazioni" class="this">Prenotazioni</a>
            </li> 
            <li id="but-logged">
                <%= link_to 'Logout', destroy_user_session_path, :method => :delete %>
            </li>
        </ul>
        <div style="display: flex;" class="logged-nav">
            <div style="margin-right: 10%; margin-top: 5%; color: #04044c; font-weight: bold;">    
                <span style="font-size:20px; text-transform:capitalize;"><%= current_user.nome%></span>
               <span  style="font-size:20px;text-transform:capitalize;"> <%= current_user.cognome%></span>
                <span style="font-size:15px;">utente</span>
            </div>
            <div style=" margin-top: 5%" class="logged-nav">
                <!-- <%= link_to 'Logout', destroy_user_session_path, :method => :delete  , class:"nav-mybutton"%>
                <button type="button"class="nav-mybutton" id="nav-mybutton" onclick="window.location.href='index.html'">logout</button> -->
               <%= button_to 'Logout', destroy_user_session_path, :method => :delete  , class:"nav-mybutton" , type: "button" , id: "nav-mybutton" , style:"width:200%;height:6ch;"%>
            </div>
        </div>   
        <div class="burger" id="logged-burger"> 
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div>    
    </nav>

    <% elsif doctor_signed_in?%> 
     <nav>
        <ul class="ul-nav-logo">
            <li>
                <div class="logo-image">
                    <%= link_to "/" do %>
                    <%=image_tag("Icon Doctor.png", alt: "Example Image" , class:"img-fluid")%>
                    <% end %>
                 </div>
            </li>
            <li>
                <div  class="mylogo">
                    <%= link_to "/" do %>
                    <p> DOC2ME </p>
                    <% end %>
                </div>
            </li>
        </ul>
        <ul class="ul-nav logged-nav">
            <li>
                <a  href="/">Home</a>
            </li>
            <li>
                <a href="/servizi">Servizi</a>
            </li>
            <li>
                <a href="/team">Il team</a>
            </li>
            <li>
                <a href="/contatti">Contatti</a>
            </li>
            <li>
                <a  href="/FAQ">FAQ</a>
            </li> 
            <li>
                <a  href="/profilo">Profilo</a>
            </li> 
            <li>
                <a  href="/prenotazioni" class="this">Prenotazioni</a>
            </li> 
            <li id="but-logged">
                <%= link_to 'Logout', destroy_user_session_path, :method => :delete %>
            </li>
        </ul>
        <div style="display: flex;" class="logged-nav">
            <div style="margin-right: 10%; margin-top: 5%; color: #04044c; font-weight: bold;">    
                <span style="font-size:20px; text-transform:capitalize;"><%= current_doctor.nome%></span>
               <span  style="font-size:20px;text-transform:capitalize;"> <%= current_doctor.cognome%></span>
                <span style="font-size:15px;">dottore</span>
            </div>
            <div style=" margin-top: 5%" class="logged-nav">
                <!-- <%= link_to 'Logout', destroy_user_session_path, :method => :delete  , class:"nav-mybutton"%>
                <button type="button"class="nav-mybutton" id="nav-mybutton" onclick="window.location.href='index.html'">logout</button> -->
               <%= button_to 'Logout', destroy_user_session_path, :method => :delete  , class:"nav-mybutton" , type: "button" , id: "nav-mybutton" , style:"width:200%;height:6ch;"%>
            </div>
        </div>   
        <div class="burger" id="logged-burger"> 
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div>    
    </nav>

    <% else %>
    <nav>
        <ul class="ul-nav-logo">
            <li>
                <div class="logo-image">
                    <%= link_to controller: "homepage",action:"show" do %>
                    <%=image_tag("Icon Doctor.png", alt: "Example Image" , class:"img-fluid",style:"margin-bottom:-10%;")%>
                    <% end %>
                 </div>
            </li>
            <li>
                <div  class="mylogo">
                    <%= link_to controller: "homepage",action:"show" do %>
                    <p> DOC2ME </p>
                    <% end %>
                </div>
            </li>
        </ul>
        <ul class="ul-nav">
            <li>
                <%= link_to "Home", {controller: "homepage",action:"show"} , class:"this"  %>   
            </li>
            <li>
            <!-- per il momento ho mappato servizi in /servizi poi vedremo -->
                <a href="/servizi">Servizi</a>
            </li>
            <li>
                <a href="/team">Il team</a>
            </li>
            <li>
                <a href="/contatti">Contatti</a>
            </li>
            <li>
                <a href="/FAQ">FAQ</a>
            </li>  
            <li id="but">
                <a href="<%= user_session_path%>">Login</a>
            </li>
        </ul>
        <button type="button"class="nav-mybutton" id="nav-mybutton" onclick="window.location.href='<%= user_session_path%>'">login</button>
        <div class="burger">
            <div class="line1"></div>
            <div class="line2"></div>
            <div class="line3"></div>
        </div> 
    </nav>  
    <% end %>

    <% if user_signed_in? %>
        <div class="container text-center" >
        <div class="row pt-5">
            <div class="col-lg-8 mx-auto" style="margin-top: 5%; color: #04044c;">
                <h1>Le tue visite</h1>   
            </div>
        </div>
    </div>
    
    <div class="container py-5">
        <div class="row">
            <div class="col-lg-2 icons-prenotazione">
                <a href="servizi.html"><button class="nav-mybutton  button-prenotazione">Prenota visita</button></a>
                <a href="#"><button class="nav-mybutton  button-prenotazione">Pagamenti visite</button></a>
            </div>
            <div class="col-lg-7 card card-prenotazione" >
                <!-- Fixed header table-->
                <div class="table-responsive">
                    <table class="table table-fixed">
                    <thead>
                        <td>ID Visita</td>
                        <td>Figlio</td>
                        <td>Dottore</td>
                        <td>Stato Visita</td>
                        <td>Tipo Visita</td>
                        <td>Annulla visita</td>
                    </thead>
                    <tbody>
                        <% @p.each do |visita| %>
                        <tr>
                        <td><%= visita.id %></td>
                        <td><%= Kid.where(:id=>visita.kid_id)[0][:name] %> <%= Kid.where(:id=>visita.kid_id)[0][:surname] %></td>
                        <td><%= Doctor.where(:id=>visita.doctor_id)[0][:nome] %> <%= Doctor.where(:id=>visita.doctor_id)[0][:cognome] %></td>
                        <td><%= visita.stato_visita %></td>
                        <td><%= visita.tipo_visita %></td>
                        <td><%= link_to 'Annulla visita', servizi_path(visita.id , visita),
                            method: :delete,
                            data: { confirm: "Sei sicuro?" } %>
	                    </td>
                        </tr>
                    <% end %>
                    </tbody>
                    </table>
                </div>
                <!-- End -->
            </div>
            <div class="col-lg-8 mx-auto" style="color: #04044c;">
                <h2><b>-</b> &nbsp Paga con paypal o direttamente al dottore </h2>
                <h2><b>-</b> &nbsp Prenota una nuova visita quando vuoi</h2>
                <h2><b>-</b> &nbsp Annulla le visite da remoto in qualsisi momento</h2>
            </div>
        </div>
    </div>
    <% else %>
        <div class="container text-center" >
        <div class="row pt-5">
            <div class="col-lg-8 mx-auto" style="margin-top: 5%; color: #04044c;">
                <h1>Le tue visite</h1>   
            </div>
        </div>
    </div>
    
    <div class="container py-5">
        <div class="row">
            <div class="col-lg-2 icons-prenotazione">
                <div id="richiedi1">
                    <button type="button"class="nav-mybutton button-prenotazione"  @click="showModal = true">Aggiungi visita</button>
                      <!--vue js proprietÃ  per transizione-->
                    <transition name="slide" appear>
                        <div class="modal modal4" v-if="showModal">
                            
                            <form action="#" style="margin: 1%;">
                                <div class="row ">
                                    <!-- data e ora -->
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="date" type="date" name="date" placeholder="data" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="ora" type="time" name="ora" placeholder="ora" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <!-- figlio -->
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="figlio-nome" type="text" name="figlio" placeholder="nome paziente da visitare" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="figlio-cognome" type="text" name="figlio" placeholder="cognome paziente da visitare" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="tipo" type="text" name="tipo" placeholder="tipo di visita" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                </div>
                                <div style="margin-top: 3%; margin-left: 10%;">
                                    <button class="nav-mybutton" @click="showModal = false" type="submit">Invia </button>
                                    <button class="nav-mybutton" @click="showModal = false">Esci</button>
                                </div>
                            </form>
                        </div>
                    </transition>
                </div>
                <div id="richiedi2">
                    <button type="button"class="nav-mybutton  button-prenotazione"  @click="showModal = true">Annulla visita</button>
                      <!--vue js proprietÃ  per transizione-->
                    <transition name="slide" appear>
                        <div class="modal modal3" v-if="showModal">
                            
                            <form action="#" style="margin: 1%;">
                                <div class="row ">
                                    <!-- data e ora -->
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="date" type="date" name="date" placeholder="data" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="ora" type="time" name="ora" placeholder="ora" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <!-- figlio -->
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="figlio-nome" type="text" name="figlio" placeholder="nome paziente da visitare" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="figlio-cognome" type="text" name="figlio" placeholder="cognome paziente da visitare" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                </div>
                                <div style="margin-top: 3%; margin-left: 10%;">
                                    <button class="nav-mybutton" @click="showModal = false" type="submit">Invia </button>
                                    <button class="nav-mybutton" @click="showModal = false">Esci</button>
                                </div>
                            </form>
                        </div>
                    </transition>
                </div>
                <div id="richiedi3">
                    <button type="button"class="nav-mybutton  button-prenotazione"  @click="showModal = true">Modifica visita</button>
                      <!--vue js proprietÃ  per transizione-->
                    <transition name="slide" appear>
                        <div class="modal modal3" v-if="showModal">
                            
                            <form action="#" style="margin: 1%;">
                                <div class="row ">
                                    <!-- data e ora -->
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="date" type="date" name="date" placeholder="data" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="ora" type="time" name="ora" placeholder="ora" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <!-- figlio -->
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="figlio-nome" type="text" name="figlio" placeholder="nome paziente da visitare" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                    <div class="input-group col-lg-12 mb-4">
                                        <input id="figlio-cognome" type="text" name="figlio" placeholder="cognome paziente da visitare" class="form-control bg-white border-left-0 border-md" required>
                                    </div>
                                </div>
                                <div style="margin-top: 3%; margin-left: 10%;">
                                    <button class="nav-mybutton" @click="showModal = false" type="submit">Invia </button>
                                    <button class="nav-mybutton" @click="showModal = false">Esci</button>
                                </div>
                            </form>
                        </div>
                    </transition>
                </div>
            </div>
            <div class="col-lg-7 card card-prenotazione" >
                <!-- Fixed header table-->
                <div class="table-responsive">
                    <table class="table table-fixed">
                        <thead>
                            <tr>
                                <td>ID Visita</td>
                                <td>Figlio</td>
                                <td>Dottore</td>
                                <td>Stato Visita</td>
                                <td>Tipo Visita</td>
                                <td>Annulla visita</td>
                            </tr>
                        </thead>
                        <tbody>
                            <% @p.each do |visita| %>
                        <tr>
                        <td><%= visita.id %></td>
                        <td><%= Kid.where(:id=>visita.kid_id)[0][:name] %> <%= Kid.where(:id=>visita.kid_id)[0][:surname] %></td>
                        <td><%= User.where(:id=>visita.user_id)[0][:email] %></td>
                        <td><%= visita.stato_visita %></td>
                        <td><%= visita.tipo_visita %></td>
                        <td><%= link_to 'Annulla visita', servizi_path(visita.id , visita),
                            method: :delete,
                            data: { confirm: "Sei sicuro?" } %>
	                    </td>
                        </tr>
                    <% end %>
                    </tbody>
                    </table>
    <% end %>


    <footer class="footer">
        <div class="container-footer">
            <div class="row-footer">
                <div class="footer-col">
                    <h4>Home</h4>
                    <ul class="ul-footer">
                        <li><a href="sos.html">go</a></li>
                        <li><a href="servizi.html">come funziona</a></li>
                        <li><a href="team.html">il team</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>team</h4>
                    <ul class="ul-footer">
                        <li><a href="team.html">i nostri medici</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Servizi</h4>
                    <ul class="ul-footer">
                        <li><a href="disponibilita.html">le visite</a></li>
                        <li><a href="servizi.html">tariffe</a></li>
                        
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>contatti</h4>
                    <ul class="ul-footer">
                        <li><a href="contatti.html">informazioni</a></li>
                        <li><a href="contatti.html">lavora con noi</a></li>

                    </ul>
                </div>
                <div class="footer-col">
                    <h4>FAQ</h4>
                    <ul class="ul-footer">
                        <li><a href="#">terms</a></li>
                        <li><a href="#">privacy policy</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>dove siamo</h4>
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3542.859591124094!2d12.460394874597359!3d41.91713546609034!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x132f60f31b74c16d%3A0xeb24764bd52036eb!2sVia%20Oslavia%2C%2014%2C%2000195%20Roma%20RM!5e0!3m2!1sit!2sit!4v1619522626225!5m2!1sit!2sit" width="100%" height="50%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                </div>
            </div>
        </div>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>
    <%= javascript_pack_tag 'index.js' %>
    <%= javascript_pack_tag 'sos.js' %>
    <%= javascript_pack_tag 'opacita.js' %>
    <%= javascript_pack_tag 'slide.js' %>
